<!DOCTYPE html>
<!-- saved from url=(0021)https://convertio.co/ -->
<html lang="en">
    <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Site Editor Menu</title>
    <meta name="description" content="Convertio - Easy tool to convert files online. More than 309 different document, image, spreadsheet, ebook, archive, presentation, audio and video formats supported.">
    <script type="text/javascript" src="./jquery.js">
    </script>
    <script type="text/javascript" src="./jquery-ui.min.js">
    </script>
    </script>
    <script src="./js/amazon-cognito-identity.min.js"></script>  
        <script src="./js/config.js"></script>
    <script type="text/javascript" src="./totop.js">
    </script>
    <script>
        
	
			window.onload = function(){
        var data = { 
				UserPoolId : _config.cognito.userPoolId,
        ClientId : _config.cognito.clientId
    	};
    	var userPool = new AmazonCognitoIdentity.CognitoUserPool(data);
    	var cognitoUser = userPool.getCurrentUser();
                
    		if (cognitoUser != null) {
            
        	cognitoUser.getSession(function(err, session) {
            if (err) {
            	alert(err);
                
              return;
            }
            //console.log('session validity: ' + session.isValid());
            
            cognitoUser.getUserAttributes(function(err, result) {
							if (err) {
								console.log(err);
                if (err["code"]=="NotAuthorizedException") {
                  //window.location.href='signin.html';
                }
                                              
                                
                return;
							}
							// user email address
							//console.log(result[2].value());

              document.getElementById("cognito").innerHTML='<b>'+result[3]["Value"]+'<b> ';						


						});
        	});
    		} else {
                
    			console.log("Already signed-out");
                //window.location.href='signin.html';
    		} 
        
                    }
    function signout(){

        var data = { 
				UserPoolId : _config.cognito.userPoolId,
                ClientId : _config.cognito.clientId
    	};
    	var userPool = new AmazonCognitoIdentity.CognitoUserPool(data);
    	var cognitoUser = userPool.getCurrentUser();
        cognitoUser.signOut();
        window.location.href="/index.html"

    }
   </script>
    </head>


   
    
<style type="text/css">
  
  body {
    margin: auto;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    overflow: auto;
    background: linear-gradient(315deg, rgba(101,0,94,1) 3%, rgba(60,132,206,1) 38%, rgba(48,238,226,1) 68%, rgba(255,25,25,1) 98%);
    animation: gradient 15s ease infinite;
    background-size: 400% 400%;
    background-attachment: fixed;
}




   .modif, input[type=file],input[type=password], input[type=email] {
    width: 30%;
    
    font-family: "fairplex-wide";
    font-size: 18px;
    opacity: 1;
    color: black;
    font-weight: 400;

    -webkit-transition: border-bottom 0.4s ease-in-out;
    transition: border-bottom 0.4s ease-in-out;
}

.modif:focus,input[type=file]:focus, input[type=password]:focus {
    border-bottom: 2px solid black;
}


.modif:valid, input[type=password]:valid {
    border-bottom: 2px solid #f50856;
} /* This is a quick fix to get an authorization / valid entry state without using JS */
/* Forms */


.tab {
  overflow:hidden;
  border: 0px solid #ccc;
  background-color: peachpuff;
  
  
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: left;
  border:#ccdfff;
  outline: none;
  cursor: pointer;
  padding: 14px 20px;
  transition: 0.3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: rgb(204, 204, 204);
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 22px;
  -webkit-animation: fadeEffect 5s;
  animation: fadeEffect 5s;
}

/* Fade in tabs */
@-webkit-keyframes fadeEffect {
  from {opacity: 0;}
  to {opacity: 1;}
}

@keyframes fadeEffect {
  from {opacity: 0;}
  to {opacity: 1;}
}

.btn-outline-blue {
        color: #3bb5e9;
        border-color: #3bb5e9;
        background-color: transparent
    }

    .btn-light2 {
        background-color: #eaeaea;
        border-color: #eaeaea;
        color: #333
    }

    .btn-outline-light {
        border-color: #8d8d8d
    }

  .button {
  background-color: #4CAF50; /* Green */
  border: none;
  color: white;
  padding: 5px 48px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin-left: 44%;
  transition-duration: 0.4s;
  cursor: pointer;
  border-radius: 5px;
  
}

.button1 {
  background-color: white; 
  color: black; 
  border: 2px solid #4CAF50;
}

.button1:hover {
  background-color: #4CAF50;
  color: white;
}




table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}

.modif {
    width: 35%;
    padding: 12px 0;
    margin: 10px 0 30px;
    display:flex;
    border:  2px solid rgb(245, 189, 179);
    border-bottom: 2px solid wheat;
    box-sizing: border-box;
    /*background: transparent;*/
    outline: none;

    font-family: "fairplex-wide";
    font-size: 18px;
    opacity: 1;
    color: black;
    font-weight: 400;

    -webkit-transition: border-bottom 0.4s ease-in-out;
    transition: border-bottom 0.4s ease-in-out;
}

.modif:focus{
    border-bottom: 2px solid black;
}


.modif:valid{
    border-bottom: 2px solid #ffffff;
}


input[type=text] {
    width: 35%;
    padding: 12px 0;
    margin: 10px 0 30px;
    /*display:flex;*/ 
    border:  2px solid rgb(245, 189, 179);
    border-bottom: 2px solid wheat;
    box-sizing: border-box;
    /*background: transparent;*/
    outline: none;

    font-family: "fairplex-wide";
    font-size: 18px;
    opacity: 1;
    color: black;
    font-weight: 400;

    -webkit-transition: border-bottom 0.4s ease-in-out;
    transition: border-bottom 0.4s ease-in-out;
    
}

input[type=text]:focus {
    border-bottom: 2px solid black;
}


input[type=text]:valid, input[type=password]:valid {
    border-bottom: 2px solid #f50856;
}

</style>
</head>
<body class="">



<div class="main-container full-height index-page">

    <header class="header">

   

    
                    <div class="navigation">

                        
                                                    <div class="guest-nav"style="margin-left: 80%; margin-right:5%;">
                              
                                    <span id ="cognito"></span><a href="#" onclick="signout()" class="btn btn-outline-blue">Sign Out</a>
                                    
                                </ul>
                               
                            </div>
                        
                        <div class="main-nav" style="background-color: #ccdfff; margin-left: 20%; margin-right: 20%;">

                            <div class="tab" > <button class="tablinks" onclick="crea()" >Site Create</button>
                                <button class="tablinks" onclick="quer()" >Site Query</button>
                                <button class="tablinks" onclick="modi()" >Site Modify</button>
                                <button class="tablinks" onclick="rev()" >Application Review</button>
                              </div>                        
                                   
                        </div>

                    </div>
                </div>

            
            

</header><br><br><br><br>

<div id="create" style= "margin-left: 20%; margin-right: 20%; border-radius: 1px; border-color: antiquewhite;"></div>
                
<div id="query" style="margin-left: 20%; margin-right: 20%;"></div>
<div id="modify" style="margin-left: 20%; margin-right: 20%;"></div>
<div id="rev" style="margin-left: 20%; margin-right: 20%;"></div>
</div>




<script>
  var sqsdel;
    function crea()
    {
        
        var text='<section class="form-wrap"><form id="crea"><input type="text" id="sid" placeholder="Site ID" required><input type="text" id="siname" placeholder="Site Name" required><input type="text" id="lon" placeholder="Site Longitude" required><input type="text" id="lat" placeholder="Site Latitude" required><input type="text" id="cit" placeholder="City" required><input type="text" id="Coun" placeholder="Country" required><input type="text" id="Ad" placeholder="Address" required><br><br<br><br<br><br<br><br<br><br><button class="button button1" onclick="sitecreate()">Submit</button><button class="button button1" onclick="cance()">Cancel</button></form></section>';
        document.getElementById("create").innerHTML=text;
        document.getElementById("query").innerHTML='';
        document.getElementById("modify").innerHTML='';
        document.getElementById("rev").innerHTML='';


    }

    function quer()
    {
        var text='<section class="form-wrap"><input type="text" id="sid" placeholder="Site ID" required><button class="button button1" onclick="sitequery()">Search</button><div id="res" style="background-color: #ffffff;"></div></section>';
        document.getElementById("create").innerHTML='';
        document.getElementById("query").innerHTML=text;
        document.getElementById("modify").innerHTML='';
        document.getElementById("rev").innerHTML='';


    }

    function cance()
    {
        document.getElementById("create").innerHTML='';
        document.getElementById("query").innerHTML='';
        document.getElementById("modify").innerHTML='';
        document.getElementById("rev").innerHTML='';


    }

    function modi()
    {
        var text='<section class="form-wrap"><input type="text" id="sid" placeholder="Site ID" required><button class="button button1" onclick="sitemodi()">Search</button><div id="res" style="background-color: #fffffff;"></div></section>';
        document.getElementById("create").innerHTML='';
        document.getElementById("query").innerHTML='';
        document.getElementById("modify").innerHTML=text;
        document.getElementById("rev").innerHTML='';


    }

    function rev()
    {
        
        document.getElementById("rev").innerHTML='<button class="button button1" onclick="revo()">Fetch</button><div id="resov" style="background-color:white;" align="center"></div>';
        document.getElementById("query").innerHTML='';
        document.getElementById("create").innerHTML='';
        document.getElementById("modify").innerHTML='';
        
    
    }

    function cancel()
    {
        
        document.getElementById("rev").innerHTML='';
        document.getElementById("query").innerHTML='';
        document.getElementById("create").innerHTML='';
        document.getElementById("modify").innerHTML='';
        
    
    }

    function revo()
    {
      var text='';
      

        httpGetAsync("https://kq3i4djqjj.execute-api.ap-northeast-1.amazonaws.com/prod/notif", function (result) {
        text = JSON.parse(result).ReceiveMessageResponse.ReceiveMessageResult.messages[0].Body;
        sqsdel = JSON.parse(result).ReceiveMessageResponse.ReceiveMessageResult.messages[0].ReceiptHandle;
        document.getElementById("resov").innerHTML=text+'<input type="button" value="Delete" onclick="sqsdelmsg(sqsdel)">';
        

    })
  }

  function sqsdelmsg(x)
    {
      const deleteMethod = {
             method: 'DELETE', // Method itself
             headers: {"Content-Type": "application/json"
                      },

}
            // make API call with parameters and use promises to get response
           
            fetch("https://kq3i4djqjj.execute-api.ap-northeast-1.amazonaws.com/prod/notif?ReceiptHandle="+ encodeURIComponent(x), deleteMethod)
            .then(response => response.text())
            .then(result =>{
                
                if(JSON.parse(result)!=null) {
                        
                alert("Successful")
                }
                })
            .catch(error => {
                
                console.log('error', error);
            });
            document.getElementById("rev").innerHTML="";


    }



    function sitecreate()
    {
        
        if (document.getElementById("sid").value !="")
        {
            
        var payload= document.getElementById("sid").value + "$" + document.getElementById("siname").value  + "$" + document.getElementById("lon").value + "$" + document.getElementById("lat").value  + "$" + document.getElementById("cit").value  + "$" + document.getElementById("Coun").value  + "$" + document.getElementById("Ad").value + "$" + document.getElementById("cognito").textContent+"$0";
        // instantiate a headers object
        var myHeader = new Headers();
            // add content type header to object
            myHeader.append("Content-Type","application/json");
            // using built in JSON utility package turn object to string and store in a variable
            var raw = JSON.stringify(payload);
            // create a JSON object with parameters for API call and store in a variable
            var requestOptions = {
                method: 'POST',
                headers: myHeader,
                body: raw,
                redirect: 'follow'
            };
            // make API call with parameters and use promises to get response
            fetch(_config.api.invokeUrl + '/profile', requestOptions)
            .then(response => response.text())
            .then(result => alert("Site data successfully submitted"))
            .catch(error => console.log('error', error));
            document.getElementById("create").innerHTML='';  
        }

        else {
            alert("Site ID cannot be null");
        }
    }
    function sitequery()
    { 
        
        if (document.getElementById("sid").value !="")
        {
            
        var payload= document.getElementById("sid").value;
        
        var myHeaders = new Headers();
            // add content type header to object
            myHeaders.append("Content-Type", "application/json");
            // using built in JSON utility package turn object to string and store in a variable
            var raw = JSON.stringify({"id":payload});
            // create a JSON object with parameters for API call and store in a variable
            var requestOptions = {
                method: 'POST',
                headers: myHeaders,
                body: raw,
                redirect: 'follow'
            };
            // make API call with parameters and use promises to get response
           
           
            fetch("https://kq3i4djqjj.execute-api.ap-northeast-1.amazonaws.com/prod/query", requestOptions)
            .then(response => response.text())
            .then(result =>{
              
                
                if(JSON.parse(result)!=null) {
                  
                        
                document.getElementById("res").innerHTML=JSON.parse(result);
                
                }
                })
            .catch(error => {
                
                console.log('error', error);
            });
            
       
        }

        else {
            alert("Site ID cannot be null");
        }
    }
    function sitemodi()
    {
        if (document.getElementById("sid").value !="")
        {
            
        var payload= document.getElementById("sid").value;
        var myHeaders = new Headers();
            // add content type header to object
            myHeaders.append("Content-Type", "application/json");
            // using built in JSON utility package turn object to string and store in a variable
            var raw = JSON.stringify({"id":payload});
            // create a JSON object with parameters for API call and store in a variable
            var requestOptions = {
                method: 'POST',
                headers: myHeaders,
                body: raw,
                redirect: 'follow'
            };
            // make API call with parameters and use promises to get response
           
            fetch("https://kq3i4djqjj.execute-api.ap-northeast-1.amazonaws.com/prod/query", requestOptions)
            .then(response => response.text())
            .then(result =>{ 
                
                if(JSON.parse(result)!=null) {
                        if (JSON.parse(result) == "Site not found") {
                          document.getElementById("res").innerHTML=result;

                        }
                        else document.getElementById("res").innerHTML=gett(result); 
                 }
                })
            .catch(error => {
                
                console.log('error', error);
            });
       
        }

       
    }
    function gett(X)
    {
       var Tab= X.split('<br>');
              var text='<section class="form-wrap"><form id="crea">SITE ID <input type="text" class="modif" disabled style="background-color:rgb(209, 200, 200);" id="sid" value="'
        + (Tab[0].split(':'))[1]+'">SITE NAME <input type="text" class="modif" id="siname" value="'+(Tab[1].split(':'))[1]+'"> LONGITUDE <input type="text" class="modif" id="lon" value="'+(Tab[2].split(':'))[1]+'">LATITUDE <input type="text" class="modif" id="lat" value="'+ (Tab[3].split(':'))[1]+'">CITY <input type="text"  class="modif" id="cit" value="'+(Tab[4].split(':'))[1]+'">COUNTRY <input type="text" id="Coun" class="modif" value="'+(Tab[5].split(':'))[1]+'">ADDRESS <input type="text" class="modif" id="Ad" value="'+(Tab[6].split(':'))[1]+'"></form></section><button class="button button1" onclick="siteupdate()">Submit</button><button class="button button1" onclick="cancel()">Cancel</button>';
        return text;
      }

      function siteupdate()
    {
       
        var payload= document.getElementById("sid").value + "$" + document.getElementById("siname").value  + "$" + document.getElementById("lon").value + "$" + document.getElementById("lat").value  + "$" + document.getElementById("cit").value  + "$" + document.getElementById("Coun").value  + "$" + document.getElementById("Ad").value + "$" + document.getElementById("cognito").textContent+"$1";
        // instantiate a headers object
        var myHeader = new Headers();
            // add content type header to object
            myHeader.append("Content-Type","application/json");
            // using built in JSON utility package turn object to string and store in a variable
            var raw = JSON.stringify(payload);
            // create a JSON object with parameters for API call and store in a variable
            var requestOptions = {
                method: 'POST',
                headers: myHeader,
                body: raw,
                redirect: 'follow'
            };
            // make API call with parameters and use promises to get response
            fetch(_config.api.invokeUrl + '/profile', requestOptions)
            .then(response => response.text())
            .then(result => alert("Site modification successfully submitted"))
            .catch(error => console.log('error', error));

            document.getElementById("modify").innerHTML='';    
        }
function httpGetAsync(theUrl, callback) {

let xmlHttpReq = new XMLHttpRequest();
xmlHttpReq.onreadystatechange = function () {
  if (xmlHttpReq.readyState == 4 && xmlHttpReq.status == 200) callback(xmlHttpReq.responseText);
};
xmlHttpReq.open("GET", theUrl, true); // true for asynchronous
xmlHttpReq.send(null);
}
    


</script>

</body>
</html>


        